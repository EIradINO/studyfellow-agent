steps:
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - 'gcloud'
  - 'functions'
  - 'deploy'
  - 'get-supabase-users' 
  - '--gen2'
  - '--region=us-central1'
  - '--runtime=python311'
  - '--source=.'
  - '--entry-point=get_supabase_users'
  - '--trigger-http'
  - '--no-allow-unauthenticated'
  - '--service-account=studyfellow@appspot.gserviceaccount.com'
  - '--memory=512MB'
  timeout: '1200s'

options:
  logging: CLOUD_LOGGING_ONLY